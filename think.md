it looks like the lastDiff > thresold is what triggers the inactive 
I need to re engineer the lastDiff to make the it so that it never reaches the > threshold value 